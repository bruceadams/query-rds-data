language: rust

os:
  - linux
  - osx
  - windows

rust:
  - stable
  - beta
  - nightly

matrix:
  allow_failures:
    - rust: nightly
  fast_finish: true

install:
  - rustup component add clippy

script:
  - cargo build  --verbose
  - cargo clippy --verbose
  - cargo test   --verbose

before_deploy: "./release-build.sh"

deploy:
  - provider: releases
    api_key:
      secure: H/bjRJTOztYMxCbvkWxJXGLRYAxN6118GUCKdbVBqxWvQNpQrVuTQVZnYjJuGETjHmCdhU+L9ekoKZ2upoi+sclccK80xpfDvOZ1jvZeKHjDS3PZrezQ4Y/FLzv/h+COn7tyCFjWXMNNuI+xy8j1EVIPoVHniAcAQRRJFP8lrI55X1/ePSHLN0Hh5SLWSYKR7M2kUkjAaRfWKwCTzmFxGNqKue1HanRDrY23OfQYzifWG64VP3BjacR5z2VEzD2/jdbRj2Pl3DVGtcQ9FCdTlPBC4TvwZMzqCVmxdRh9md/bgYZ5zmJ1OOkVf2CBIVTu8X2VAVjbWbBwLCuHYVdl0FwKG6NfKJt+pZGkKPqInLc3/LJJuf4cF1ki1zRZhlkuu16vLEaTpzK/od9aJ6Vaf6iATPQcSBb7Bf3aXYYxPxCgKpQNLMwftWZ6TZI+LZF+RQc1jW9nms/JHRh6zSqbry1woUk02ZtCAHD4Xg9e9FDJv7ZM/v5DUgS3n795P9AXVJvSLQEcn83BoKOyROVm2uybrQw57U/lAxAWrk2sqay5jAOO1y0LPYo47/LKACxOSNATNPEq+Fz5QRVfHY1plHpi0nGMK8I9XhfTfPtKdnOdmnKuMLdi8lyn5mVqcJVKqTb1ZZp1SnUFE4myHjd9nNExdrPfu2FW0DH+7bH6r30=
    file_glob: true
    file: target/query-rds-data.*
    skip_cleanup: true
    on:
      repo: bruceadams/query-rds-data
      rust: stable
      tags: true
  - provider: cargo
    on:
      condition: $TRAVIS_OS_NAME == linux
      repo: bruceadams/query-rds-data
      rust: stable
      tags: true
    token:
      secure: eOdggyTI8hu+ck017m81N3wZLRsYnlZK76hTB110lsRN+cUb5AGXDxLyDsuqyyJkLXoNwB7cx+xZ+cKY5RDt7ga++seUB3aX8BAxpWl6411zqmD6LW+yPiqltYNJ8rMt+7lPwlnIdIUeOrSIn1XgABdN4v2CXuhcFf2dKLsFtm/HFpvneEyyuN5YCyXpQhbyvsPnuxT/hGq3GIEkxYfB0USM1qGhlawVYYL853aeZqh+4mawFV9t1F+rozC+NEUyg0PkAlahgyQEzhHEnnuZ0oAlAbeILo5U0/dURrQ7crnJrUMT3Kd34pqLg1Mmw6btWVcnWZ6xwzd5MRDTwWTh9KfSyZMDqvcft2O+YXIFhLlWyxAAlpJRRJjOvMcs6dSK3jVYV+xHq0Org5okZBh6Z/oB6Dmbh2LAVksFbjduCUMvzL91FTAaoqbZg91vb+3hiy3Zf9ql49dImpS/B06eLzEARtn0MqgBVRD33tEiwyt+754065OfaCHFwoSaR+c7acJz8lcUf/jI2E5gfgQBY0GPce4oMhM3ta8iZWdvTD4SXIThWndjwz2jgEbnfGBpoKIsQuk9bfDiwopKXUGaEoKe4DV0Y8H6463xjKVRTZFkcAdnMUJedV6P1VXoPXMYZ8UM9Oai45T63aG9KPlpumvodwtoyE5E3ehr4h2mQkw=
